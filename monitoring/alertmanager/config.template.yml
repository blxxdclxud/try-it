global:
  resolve_timeout: 5m # Delay before marking as resolved.

route:
  receiver: 'telegram'
  group_by: [ alertname, severity ]
  group_wait: 30s # Delay before first notification.
  group_interval: 5m # Delay between updates.
  repeat_interval: 2h # Delay between re-sending unresolved alerts.
  routes:
  - match:
      severity: 'critical'
    receiver: 'telegram-critical'
    repeat_interval: 30m
  - match:
      severity: 'warning'
    receiver: 'telegram-warning'

receivers:
- name: 'telegram'
  telegram_configs:
  - bot_token: ${TELEGRAM_BOT_TOKEN}
    chat_id: ${TELEGRAM_CHAT_ID}
    api_url: 'https://api.telegram.org'
    parse_mode: 'HTML'
    message: |
      <b>üö® Default Alert üö®</b>
      <pre>{{ range .Alerts }}
      ‚Ä¢ {{ .Annotations.summary }}
      {{ end }}</pre>

- name: 'telegram-critical'
  telegram_configs:
  - bot_token: ${TELEGRAM_BOT_TOKEN}
    chat_id: ${TELEGRAM_CHAT_ID}
    api_url: 'https://api.telegram.org'
    parse_mode: 'HTML'
    message: |
      <b>üî• CRITICAL ALERT üî•</b>
      <pre>{{ range .Alerts }}
      ‚Ä¢ {{ .Annotations.summary }}
      {{ .Annotations.description }}
      {{ end }}</pre>

- name: 'telegram-warning'
  telegram_configs:
  - bot_token: ${TELEGRAM_BOT_TOKEN}
    chat_id: ${TELEGRAM_CHAT_ID}
    api_url: 'https://api.telegram.org'
    parse_mode: 'HTML'
    message: |
      <b>‚ö†Ô∏è WARNING ALERT ‚ö†Ô∏è</b>
      <pre>{{ range .Alerts }}
      ‚Ä¢ {{ .Annotations.summary }}
      {{ .Annotations.description }}
      {{ end }}</pre>
